/*!
 * Copyright 2006 - 2015 TubePress LLC (http://tubepress.com/).
 * This file is part of TubePress Pro.
 * REDISTRIBUTION PROHIBITED. Please see http://tubepress.com/license for details.
 */
;var tubePressAjaxSearch;(function(c,f){var n="tubepress",j="search",m=j+"Results",i="ephemeral",g=" ",h="#js-"+n+"-ajax-"+j+"-",o=h+"button-",t="",p="disabled",v=f.Logger,s=f.Beacon,l={},q=true,b=v.on(),e=v.log,a=f.Lang.Utils,r=f.Ajax.LoadStyler,k=(function(){var A=function(){return f.Gallery},B=function(){return a.isDefined(A())},C=function(){return A().Selectors},D=function(G){return l[G][i][m+"DomId"]},z=function(G){return B()&&C().getOutermostElement(G).length>0},x=function(K,I,M){if(M){var J=C(),H=J.getThumbAreaSelectorLegacy(K),G=J.getThumbAreaSelectorModern(K),L=c(H).length>0;return L?H:G}return I},w=function(H,G){if(H){return G+" > *"}return""},E=function(G){var H=l[G][i];if(B()){c.extend(H,A().Options.getEphemeralOptions(G))}H.output=m;return H},F=function(H,G){if(H){return function(){s.publish(n+".gallery.newthumbs",{galleryId:G})}}return function(){}},y=function(O,K){var P=D(K),I=z(K),Q=x(K,P,I),L=c(P).length>0,H={tubepress_action:"shortcode",tubepress_search:O,tubepress_options:E(K)},N=F(I,K),J=w(I,Q),M=f.Environment.getAjaxEndpointUrl()+g+J,G=function(){c(o+K).prop(p,false);r.removeLoadingStyle(Q);N()};if(!I&&!L){if(b){e("Bad target selector and missing gallery")}return}if(b){e("Final dest: "+Q);e("Ajax selector: "+J)}r.applyLoadingStyle(Q);c(Q).load(M,H,G)};return{send:y}}()),u=(function(){var x=function(C){C.stopPropagation();C.preventDefault();var z=C.target.id,B=z.replace(o.replace("#",t),t),D=c(h+"input-"+B),A=D.val(),y=c(C.target);if(b){e(z+" clicked")}y.prop(p,q);k.send(A,B);return false},w=function(y){c(o+y).click(x)};return{register:w}}()),d=(function(){var w=function(y,x){if(b){e("Register "+y);v.dir(x)}l[y]=x;u.register(y)};return{register:w}}());f.AsyncUtil.processQueueCalls("tubePressAjaxSearch",d)}(jQuery,TubePress));